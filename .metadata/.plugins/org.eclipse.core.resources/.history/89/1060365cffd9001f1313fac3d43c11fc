import java.util.Arrays;

public class FiveCards {
	
	public static final int NUMBER_OF_CARDS = 5;
	private Card[] cards = new Card[5];
	private int changes;
	private int score;
	private String history = "";
	
	public FiveCards() {
		int count = 0;

		while (count < 5) {
			Card newCard = Card.pickACard();
	        boolean isDuplicate = false;
	            
	        for (int i = 0; i < count; i++) {
	        	if (newCard.equals(cards[i])) {
	        		isDuplicate = true;
	        		break;
	        	}
	        }
	            
	        if (!isDuplicate) {
	        	cards[count] = newCard;
	            count++;
	        }
	    }
		changes = 0;
		score = 0;
		history += Arrays.toString(cards) + "\n";
	}
	
	public void changeOne(int x) {
		try {
			cards[x - 1] = Card.pickACard();
			history += "Card changed at " + x + "\n" + Arrays.toString(cards);
			changes++;
		} 
		catch(Exception e) {
			System.err.print("please enter a valid number (1-5)");
			System.exit(0);
		}
	}
	
	public int countPairs(int r) {
        int count = 0;
        for (int i = 0; i < NUMBER_OF_CARDS - 1; i++) {
            for (int j = i + 1; j < NUMBER_OF_CARDS; j++) {
                if (cards[i].getRank() == r && cards[j].getRank() == r) {
                    count++;
                }
            }
        }
        return count;
    }
	
	public void computeScore() {
		int count = 0;
		
		for (int i = 0; i < 13; i++) {
			count +=  countPairs(i) / 2;
		}
		
		score = count;
		System.out.println("score: " + score);
		history += "Score: " + score + "\n";
	}
	
	public int getScore() {
		return score;
	}
	
	public int getChanges() {
		return changes;
	}
	
	@Override 
	public String toString() {
		return Arrays.toString(cards);
	}
	
	public String getHistory() {
		return history;
	}
		
		
	
	public static void main(String[] args) {
		
		FiveCards myCards = new FiveCards();
		System.out.println(myCards);
		myCards.computeScore();
		myCards.changeOne(1);
		myCards.computeScore();
		myCards.changeOne(5);
		myCards.computeScore();
		System.out.println("\nHistory:\n" + myCards.getHistory());
		
	}
	
	
}
